jQuery(function($){JBZoo.widget('HyperPC.SiteLoadConfiguration',{'ajaxErrorMessage':'Ajax loading error...'},{input:null,submitButton:null,init:function($this){$this.input=$this.$('[name="configuration_id"]');$this.submitButton=$this.$('[type="submit"]');if(typeof $this.input.mask==='function'){$this.input.mask('0000000');}},_lockButton:function($button){$button.attr('disabled','disabled').prepend('<span uk-spinner="ratio: 0.67"></span>').find('[uk-icon]').attr('hidden','hidden')},_unlockButton:function($button){$button.removeAttr('disabled').find('[uk-icon]').removeAttr('hidden');$button.find('[uk-spinner]').remove();},_handleError:function($this,message){$this.el.prepend('<div class="uk-alert uk-alert-danger" uk-alert >'+'<a class="uk-alert-close" uk-close></a>'+message+'</div>');},'submit {element}':function(e,$this){e.preventDefault();$this.$('[uk-alert]').remove();var configId=$this.input.val();$this._lockButton($this.submitButton);$.ajax({'url':'/index.php','dataType':'json','data':{'option':'com_hyperpc','format':'raw','tmpl':'component','task':'configurator.check_configuration','configuration_id':configId}}).done(function(data){if(data.result==='success'){window.location.href=$this.el.attr('action')+'&configuration_id='+configId;$(document).trigger('goToConfigurator');}else{$this._handleError($this,data.msg);}}).fail(function(error){$this._handleError($this,$this.getOption('ajaxErrorMessage'));}).always(function(){$this._unlockButton($this.submitButton);});}});});